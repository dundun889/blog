# Day03

## 综合案例（图书管理系统）

### 要实现的效果：

图书的增删改查

###涉及到的知识点：

- 指令：v-for(图书列表渲染)、v-model(获取编号、名称的值)、v-on（提交--新增、修改）、插值表达式（图书总数）、v-if（列表数据删没有，提示一下）、v-bind（提交按钮是否可用）
- 计算属性：图书总数
- 过滤器：时间处理
- watch：监听图书重名
- 生命周期钩子：created/mounted 搞一个延时，等几秒之后给模型(图书列表)赋值
- 自定义指令：名称文本框获取焦点

### 实现步骤：

1. 渲染数组、图书总数

   在`mounted`钩子中，模拟后台请求给模型数据赋值，再使用`v-for`遍历渲染

   使用`filter`对列表中的每一行时间，进行过滤

   通过`computed`实现图书总数的渲染

   使用`v-if`，当数组中的长度为0时，给它一个提示

2. 新增

   通过`v-model`获取到id、name

   给提交按钮添加点击事件

   在`submit`方法中，把id、name、date组成一个对象，push到模型books中

   当我们输入名称的时候，如果发现了名字跟已有数据相同，则禁用提交按钮（watch、v-bind）,这一步建议先把按钮的禁用或是启动先搞定，然后再监听name的输入，最后根据用户输入的值，来决定是否可用

3. 修改（难）

   给修改a标签添加点击事件（考虑a标签的默认行为），拿到id、name

   把拿到的id、name通过`v-model`显示到输入框中

   多写一个模型值`isEdit`然后根据它的值决定编号文本框是否可用（v-bind）

   点击提交之后，根据`isEdit`来进行判断，如果是`true`就是修改，如果是`false`就是新增

   如果是修改的话，先根据id找到对应的对象，然后修改对象的name和date即可

4. 删除

   给删除a标签添加点击事件（考虑a标签的默认行为），并且要拿到参数(index、id)

   根据索引，删除数组中对应的元素即可

5. 其它

   如果传递的是一个id，要删除数组中的元素，第一种根据id，找到对应的索引，然后删除

## 组件

### 传统写法（了解）

### 注意事项：

- 组件也分为全局与局部组件

- 全局注册

  ```javascript
  /***
    * @description: 组件的全局注册
    * @param {string}: 组件的名字
    * @param {object}: 组件的实例, 他只管自己组件内部的事情
    **/
  
  ```

- 局部注册

  ```javascript
   /**
    * @description: 组件的局部注册
    * @param {component-a} : 组件引用的自定义名字
    * @param {ComponentA} : 组件的文件名
    */
  ```

  

- 组件中的内容，跟之前不一样的地方在于`data`必须是一个函数，并且里面要返回一个全新的`对象`。 这个时候, Vue底侧解析就会自动调用data函数返回一个`新的`对象。这个新对象就是和每个组件挂钩起来的, 然后数据之间就不会互相干扰了

- ![date](D:\黑马资料\vuebase\md教学\img\date.png)

### 单文件组件(重点)

> 组成部分

- template：必须要有

  <template>
      <div></div>
  </template>

- script：可选

  <script>
  export default {}
  </script>

- style：可选    

  <style lang="less">
   里面支持less的语法规则    
  </style>

### 注意事项：

- `.vue`结尾的额文件，既可以充当`页面`，也可以充当`组件`
- 页面跟组件的关系就是包含关系，比如一个页面可以包含多个组件
- 我们一般会把叫做`App.vue`的文件叫做根组件，他是第一个被看到的文件，有点首页的意思
- `.vue`结尾的文件，浏览器不识别，需要借助于`webpack`![webpack](E:\黑马资料\vuebase\day03\教学资源\img\webpack.png)
- 运行当文件组件的时候，要把终端切换到文件所在目录，然后运行`vue serve App.vue --open`

### 脚手架 & 运行单文件组件

### 快速原型开发

这个是vue给我们提供的一个便利，这个可以让我们无需生成一个完整的项目情况下，也可以进行一些简单的尝试性

### 注意事项：

- 我们的组件，导入之后，必须注册之后才能使用

### 前提：

安装一个全局包：`npm install -g @vue/cli-service-global`

### 组件间传值

#### 父组件传值给子组件

#### 子组件传值给父组件

#### 兄弟组件传值

## 模块化

核心：模块化的核心就是导出与导入

node:  require(导入)、module.exports(导出)

**以后无论是浏览器端还是服务端(node)，都推荐使用es6的模块化导入、导出**

**导出：export default** 

**导入：import 名字 from '路径'**

